{% load humanize %}
{% load dict_filters %}
{% load math_filters %}

<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ğŸ“Š íŒ€ ëª©ë¡</title>
</head>
<body>
    <h2>ğŸ“ˆ íŒ€ ë¦¬ìŠ¤íŠ¸</h2>
    <table border="1">
        <thead>
            <tr>
                <th>íŒ€</th>
                <th>ìŠ¹</th>
                <th>íŒ¨</th>
                <th>ë¬´</th>
                <th>íƒ€ìœ¨1ìœ„</th>
                <th>ì¶œë£¨ìœ¨1ìœ„</th>
                <th>ì¥íƒ€ìœ¨1ìœ„</th>
                <th>ERA1ìœ„</th>
            </tr>
        </thead>
        <tbody>
            {% for team in teams %}
            <tr>
                <td>{{ team.name }}</td>
                <td>{{ team.wins }}</td>
                <td>{{ team.losses }}</td>
                <td>{{ team.draws }}</td>
                <td>{{ team.highlights|get_item:"íƒ€ìœ¨"|first }} ({{ team.highlights|get_item:"íƒ€ìœ¨"|last }})</td>
                <td>{{ team.highlights|get_item:"ì¶œë£¨ìœ¨"|first }} ({{ team.highlights|get_item:"ì¶œë£¨ìœ¨"|last }})</td>
                <td>{{ team.highlights|get_item:"ì¥íƒ€ìœ¨"|first }} ({{ team.highlights|get_item:"ì¥íƒ€ìœ¨"|last }})</td>
                <td>{{ team.highlights|get_item:"ERA"|first }} ({{ team.highlights|get_item:"ERA"|last }})</td>
            </tr>
            {% empty %}
            <tr><td colspan="8">ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.</td></tr>
            {% endfor %}
        </tbody>
    </table>

    <h2>ğŸŸï¸ íŒ€ ì •ë³´</h2>
    <table border="1">
        <thead>
            <tr>
                <th>ìˆœìœ„</th>
                <th>íŒ€ëª…</th>
                <th>ê²½ê¸°ìˆ˜</th>
                <th>ìŠ¹</th>
                <th>ë¬´</th>
                <th>íŒ¨</th>
                <th>ìŠ¹ë¥ </th>
                <th>ë“ì </th>
                <th>ì‹¤ì </th>
                <th>ì¡°íšŒìˆ˜</th>
            </tr>
        </thead>
        <tbody>
            {% for team in teams %}
            {% with total=team.wins|add:team.draws|add:team.losses %}
            <tr>
                <td>{{ forloop.counter }}</td>
                <td>{{ team.name }}</td>
                <td>{{ total|intcomma }}</td>
                <td>{{ team.wins }}</td>
                <td>{{ team.draws }}</td>
                <td>{{ team.losses }}</td>
                <td>
                    {% if total > 0 %}
                        {{ team.wins|div:total|floatformat:3 }}
                    {% else %}
                        0.000
                    {% endif %}
                </td>
                <td>{{ team.runs_scored|default:0 }}</td>
                <td>{{ team.runs_allowed|default:0 }}</td>
                <td>{{ team.views|intcomma|default:"0" }}</td>
            </tr>
            {% endwith %}
            {% empty %}
            <tr><td colspan="10">ë“±ë¡ëœ íŒ€ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</body>
</html>